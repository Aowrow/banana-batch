# 🍌 Banana Batch 用户指南

欢迎使用 Banana Batch！这是一个强大的 AI 图片生成工具，让你可以轻松创建、编辑和批量生成图片。

---

## 🌐 如何访问网页

### 访问地址

根据部署方式不同，访问地址如下：

**方式一：通过域名访问（推荐）**
- 访问地址：`http://www.vince123.xyz` 或 `http://vince123.xyz`
- 端口：80（HTTP，默认端口，无需输入）
- 适用于：生产环境部署

**方式二：通过 IP 和端口访问**
- 访问地址：`http://你的服务器IP:3000`
- 端口：3000
- 适用于：开发/测试环境

**方式三：本地开发**
- 访问地址：`http://localhost:3000`
- 端口：3000
- 适用于：本地开发测试

### 浏览器要求

- ✅ Chrome（推荐）
- ✅ Firefox
- ✅ Edge
- ✅ Safari
- ❌ 不支持 IE 浏览器

---

## ✨ 什么是 Banana Batch？

Banana Batch 是一个基于 Google Gemini AI 的图片生成工具，你可以：

- 🎨 **用文字生成图片** - 输入描述，AI 帮你画出来
- 🖼️ **用图片生成图片** - 上传参考图，让 AI 基于图片创作
- 📦 **批量生成** - 一次生成多张图片，提高效率
- 💬 **对话式创作** - 多轮对话，逐步完善你的作品
- 🔄 **重试功能** - 一键重新生成不满意的图片
- 🗑️ **删除消息** - 清理对话历史
- 🌓 **主题切换** - 支持浅色/深色主题

---

## 🚀 快速开始（3 步）

### 第 1 步：获取 API Key

**详细步骤：**

1. **访问 Google AI Studio**
   - 打开浏览器，访问：https://ai.google.dev/
   - 或直接搜索 "Google AI Studio"

2. **登录账号**
   - 使用你的 Google 账号登录
   - 如果没有 Google 账号，需要先注册

3. **创建 API Key**
   - 登录后，点击页面上的 **"Get API Key"** 或 **"获取 API 密钥"** 按钮
   - 如果是第一次使用，会提示创建新项目或选择现有项目
   - 选择项目后，点击 **"Create API Key"** 创建新密钥

4. **复制 API Key**
   - 创建成功后，会显示你的 API Key（格式类似：`AIzaSy...`）
   - **重要**：立即复制并保存好，页面关闭后无法再次查看完整密钥
   - 如果忘记保存，需要删除旧密钥并创建新的

**注意事项：**
- ⚠️ API Key 是私密信息，不要分享给他人
- ⚠️ 如果密钥泄露，请立即删除并创建新的
- ⚠️ Google 对 API 使用有配额限制，超出后需要等待或升级账户

**获取帮助：**
- 如果遇到问题，可以访问 [Google AI Studio 帮助文档](https://ai.google.dev/docs)
- 或查看 [API Key 管理页面](https://aistudio.google.com/app/apikey)

---

### 第 2 步：配置 API Key

1. **打开 Banana Batch 应用**
   - 在浏览器中访问应用地址（见上方"如何访问网页"）

2. **打开设置面板**
   - 点击页面右上角的 **🔑 钥匙图标**
   - 会弹出设置面板

3. **输入 API Key**
   - 在 "API Key" 输入框中粘贴你刚才复制的 API Key
   - 确认格式正确（以 `AIzaSy` 开头）

4. **保存设置**
   - 点击 **✓ 确认** 或按 **Enter** 键保存
   - API Key 会自动保存到浏览器的本地存储中
   - 下次访问时会自动加载（除非清除浏览器数据）

**安全提示：**
- ✅ API Key 只存储在**你的浏览器**中，不会上传到服务器
- ✅ 即使查看网页源代码，也看不到你的 API Key
- ✅ 每个用户需要自己配置自己的 API Key

---

### 第 3 步：开始创作！

配置完成后，你就可以开始使用了！

**基本操作：**

1. **输入提示词**
   - 在页面底部的输入框中输入你的想法
   - 例如：
     - "一只可爱的小猫坐在窗台上"
     - "赛博朋克风格的城市夜景"
     - "水彩画风格的风景"

2. **发送消息**
   - 点击输入框右侧的 **发送按钮**（蓝色圆形图标）
   - 或直接按 **Enter** 键（Shift+Enter 可以换行）

3. **等待生成**
   - 图片会逐步生成并显示在页面上
   - 可以随时点击 **停止按钮**（红色方块图标）取消生成

4. **查看结果**
   - 生成的图片会显示在对话列表中
   - 可以点击图片放大查看
   - 点击图片可以标记为"选中"，保留在上下文中

---

## 🎯 核心功能详解

### 1️⃣ 文字生成图片

**最简单的方式** - 只需要输入文字描述！

**示例：**
```
一只橘色的短毛猫，坐在窗台上，阳光透过窗户洒在它身上，卡通风格
```

**技巧：**
- ✅ 描述越详细越好
- ✅ 可以指定风格："写实风格"、"卡通风格"、"水彩画风格"
- ✅ 可以指定场景、光线、情绪等

---

### 2️⃣ 图片 + 文字生成

**上传参考图，让 AI 理解你的想法！**

**如何使用：**

1. **上传图片**
   - **方式一（推荐）**：直接将图片文件拖拽到输入框区域
   - **方式二**：点击输入框，选择文件上传
   - 支持格式：JPG、PNG、GIF、WebP 等常见图片格式
   - 限制：最多 10 张，每张最大 20MB

2. **预览图片**
   - 上传后，图片会显示在输入框上方
   - 每张图片会标注"图一"、"图二"等标签
   - 可以点击图片右上角的 ❌ 删除不需要的图片

3. **输入描述**（可选）
   - 在输入框中输入你的要求
   - 可以用"图一"、"图二"来引用上传的图片

4. **点击发送**
   - 点击发送按钮或按 Enter 键
   - AI 会基于你上传的图片和文字描述生成新图片

**使用场景：**

- **风格转换**：上传一张照片，输入"将这张照片转换为卡通风格"
- **角色替换**：上传 2 张图片，输入"将图二中的角色替换成图一中的形象"
- **细节修改**：上传图片，输入"修改这张图片的背景颜色为蓝色"
- **组合创作**：上传多张参考图，输入"结合图一和图二的风格创作新作品"

**示例：**
- 上传 2 张图片，输入："将图二中的角色替换成了图一中的形象，同时保留了原来的服装"
- 上传 1 张照片，输入："将这张照片转换为水彩画风格"
- 上传 1 张图片，输入："给这张图片添加一个彩虹背景"

**图片编号说明：**
- 上传的图片会自动按顺序标注"图一"、"图二"、"图三"等
- 在文字描述中可以用"图一"、"图二"来引用对应的图片
- 图片顺序很重要，确保按正确顺序上传

---

### 3️⃣ 批量生成

**一次生成多张图片，提高效率！**

**如何设置：**

1. 在右上角设置面板找到 **批次大小** 滑块
2. 拖动滑块选择数量（1-20 张）
3. 发送消息，等待批量生成

**建议：**
- 快速测试：1-2 张
- 正常使用：2-5 张
- 批量创作：10-20 张

---

### 4️⃣ 图片选择与上下文

**选择喜欢的图片，保留在对话中！**

**如何选择：**
1. 鼠标悬停在生成的图片上
2. 点击图片，会显示"Selected"标记
3. 选中的图片会保留在对话上下文中

**为什么重要？**
- 选中的图片会传递给后续的生成请求
- 让 AI 记住你喜欢的风格和内容
- 可以基于选中的图片继续创作

**取消选择：**
- 再次点击已选中的图片即可取消

---

### 5️⃣ 重试功能

**生成结果不满意？一键重试！**

**如何使用：**
- 找到你想要重试的用户消息
- 点击消息下方的 **🔄 重试按钮**（旋转箭头图标）
- 系统会删除该消息及之后的所有消息
- 然后使用相同的提示词和图片重新生成

**适用场景：**
- 生成结果不符合预期
- 想要不同的风格或角度
- 生成失败需要重试
- 想要更多变化

**注意事项：**
- 重试会删除该消息之后的所有对话
- 重试会保留原始的用户消息（文字和图片）
- 可以多次重试直到满意

---

### 6️⃣ 删除消息

**清理对话历史，重新开始！**

**如何删除：**

1. **删除单条消息及之后的内容**
   - 找到你想要删除的消息
   - 点击消息旁边的 **🗑️ 删除按钮**
   - 会删除该消息及之后的所有消息
   - 需要确认操作

2. **清除所有消息**
   - 点击右上角设置面板中的 **🗑️ 垃圾桶图标**
   - 会清除所有对话历史
   - 需要确认操作

**使用场景：**
- 想要重新开始对话
- 删除不需要的消息
- 清理对话历史
- 释放浏览器存储空间

**注意事项：**
- 删除操作不可恢复，请谨慎操作
- 删除消息不会影响已保存的图片（如果已下载）

---

## ⚙️ 设置说明

### 批次大小（Batch Size）

**作用**：控制一次生成多少张图片

**范围**：1-20 张

**建议：**
- 1-2 张：快速测试
- 2-5 张：正常使用（推荐）
- 10-20 张：批量生成

---

### 宽高比（Aspect Ratio）

**作用**：控制生成图片的形状

**选项：**
- **Auto**：自动比例（默认 1:1）
- **1:1**：正方形 - 适合头像、图标
- **3:4**：竖版 - 适合人像、手机壁纸
- **4:3**：横版 - 适合风景、电脑壁纸
- **9:16**：竖版长图 - 适合手机全屏壁纸
- **16:9**：横版长图 - 适合电脑桌面壁纸

---

### 分辨率（Resolution）

**作用**：控制生成图片的质量和大小

**选项：**
- **1K**：快速模式，1024x1024（或对应宽高比）
- **2K**：高质量模式，2048x2048（或对应宽高比）
- **4K**：超高质量模式，4096x4096（或对应宽高比）

**建议：**
- 快速预览：1K
- 正常使用：2K（推荐）
- 高质量输出：4K

---

### 主题切换

**如何切换：**
- 点击右上角设置面板中的 **🌙/☀️ 图标**

**两种主题：**
- **深色主题**（默认）：适合夜间使用，护眼
- **浅色主题**：适合白天使用，清晰明亮

---

## 💡 使用技巧

### 提示词优化

**好的提示词示例：**
```
一只橘色的短毛猫，坐在窗台上，阳光透过窗户洒在它身上，背景是花园，卡通风格，细节丰富，柔和的光线
```

**提示词结构：**
1. **主体**：猫、人物、风景等
2. **细节**：颜色、材质、表情等
3. **场景**：位置、背景、环境等
4. **风格**：写实、卡通、水彩等
5. **光线**：自然光、柔光、逆光等

---

### 多图片参考技巧

**场景 1：风格转换**
- 上传 1 张照片
- 输入："将这张照片转换为卡通风格"

**场景 2：角色替换**
- 上传 2 张图片（图一：角色A，图二：场景）
- 输入："将图二中的角色替换成图一中的形象"

**场景 3：组合创作**
- 上传多张参考图
- 输入："结合图一和图二的风格，创作一幅新的作品"

---

### 批量生成策略

1. **先小批量测试**
   - 先用 1-2 张测试效果
   - 确认满意后再增加数量

2. **调整参数**
   - 根据效果调整宽高比和分辨率
   - 优化提示词

3. **批量生成**
   - 确认满意后，增加批次大小
   - 一次生成多张图片

---

### 对话式创作

**多轮对话，逐步完善：**

1. **第一轮**：生成基础图片
   ```
   "一只小猫"
   ```

2. **选择喜欢的图片**：点击图片标记为选中

3. **第二轮**：基于选中的图片继续创作
   ```
   "给这只小猫添加一个蝴蝶结"
   ```

4. **继续优化**：重复上述步骤，逐步完善

---

## ❓ 常见问题

### Q: 如何获取 API Key？

**A:** 详细步骤请参考上方"第 1 步：获取 API Key"部分。

**快速步骤：**
1. 访问 [Google AI Studio](https://ai.google.dev/)
2. 使用 Google 账号登录
3. 点击"Get API Key"或"获取 API 密钥"
4. 创建新项目或选择现有项目
5. 点击"Create API Key"创建密钥
6. 复制密钥（格式：`AIzaSy...`）
7. 在 Banana Batch 应用中粘贴并保存

**常见问题：**
- **Q: 找不到创建 API Key 的按钮？**
  - A: 确保已登录 Google 账号，可能需要先创建项目

- **Q: API Key 创建后无法查看完整内容？**
  - A: 这是正常的安全措施，如果忘记保存，需要删除旧密钥并创建新的

- **Q: API Key 有使用限制吗？**
  - A: 是的，Google 对免费账户有配额限制，超出后需要等待或升级账户

---

### Q: 图片上传后没有反应？

**A:** 
- 检查文件格式是否为图片（JPG、PNG、GIF 等）
- 确认文件大小不超过 20MB
- 尝试刷新页面重新上传

---

### Q: 生成的图片质量不满意？

**A:** 
- 尝试使用更高分辨率（2K 或 4K）
- 优化提示词，添加更多细节描述
- 调整宽高比设置
- 使用"重试"功能重新生成

---

### Q: 如何停止正在生成的图片？

**A:** 
- 点击输入框右侧的 **停止按钮**（红色方块图标）
- 生成会立即停止

---

### Q: 图片选择后如何取消？

**A:** 
- 再次点击已选中的图片即可取消选择

---

### Q: 可以上传多少张图片？

**A:** 
- 最多可以上传 10 张图片
- 每张图片最大 20MB

---

### Q: 拖拽上传不工作？

**A:** 
- 确认浏览器支持拖拽功能（Chrome、Firefox 等）
- 检查文件是否为图片格式
- 尝试刷新页面

---

### Q: 如何清除所有对话？

**A:** 
- 点击右上角设置面板中的 **🗑️ 垃圾桶图标**
- 确认后即可清除所有对话历史

---

## 🎨 使用示例

### 示例 1：简单文字生成

**输入：**
```
一只可爱的小猫坐在窗台上
```

**结果：** 生成一张小猫坐在窗台上的图片

---

### 示例 2：风格指定

**输入：**
```
一只小猫，赛博朋克风格，霓虹灯背景
```

**结果：** 生成赛博朋克风格的小猫图片

---

### 示例 3：图片参考

**步骤：**
1. 上传一张人物照片
2. 输入："将这张照片转换为卡通风格"

**结果：** 生成卡通风格的人物图片

---

### 示例 4：多图片组合

**步骤：**
1. 上传 2 张图片（图一：角色，图二：场景）
2. 输入："将图二中的角色替换成图一中的形象"

**结果：** 生成新角色在场景中的图片

---

### 示例 5：批量生成

**步骤：**
1. 设置批次大小为 5
2. 输入："一只小猫的不同姿势"
3. 点击发送

**结果：** 一次生成 5 张不同姿势的小猫图片

---

## 🔧 快捷键

- **Enter**：发送消息（如果输入框有内容）
- **Shift + Enter**：在输入框中换行

---

## 💬 获取帮助

如果遇到问题：

1. 查看浏览器控制台的错误信息（按 F12）
2. 检查网络连接
3. 确认 API Key 配置正确
4. 查看本文档的常见问题部分

---

## 🎉 开始创作

现在你已经了解了所有功能，开始创作你的图片吧！

**推荐流程：**
1. ✅ 配置 API Key
2. ✅ 选择你喜欢的主题
3. ✅ 调整设置参数（批次大小、分辨率等）
4. ✅ 输入提示词或上传图片
5. ✅ 点击发送，等待生成
6. ✅ 选择喜欢的图片，继续创作

祝你使用愉快！🎨

---

## 📝 更新日志

### 最新功能
- ✨ 重试功能：一键重新生成最后一条消息
- 🗑️ 删除消息：清理对话历史
- 🖼️ 图片上传：支持拖拽上传多张参考图
- 🌓 主题切换：支持浅色/深色主题
- 🎯 图片选择：选择喜欢的图片保留在上下文中

---

**需要更多帮助？** 查看技术文档：[USAGE.md](./USAGE.md)

